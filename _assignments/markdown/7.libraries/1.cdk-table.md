# Angular CDK table
To use the CDK table in the application the following steps are needed
. install packages & dependencies from npm
. create the feature module
. import the necessary packages modules into the feature module.
. use the table following the documentation

### Install packages from npm

#### manual
Most libraries have an [installation guide](https://material.angular.io/guide/getting-started) that tells you what to install.
Below are the commands that you need to execute
```
npm install --save @angular/material @angular/cdk
```

#### angular cli
you can use the following command to add libraries to the project using the CLI, and configure the app automatically.
```
npx ng add @angular/material
```
This will add the necessary dependency `@angular/cdk` automatically to `package.json`, and installs them.
Furthermore, `app.module` will be updated with the `BrowserAnimationsModule` added to the imports. This is required for `@angular/material` to work.

### Create the feature module

. Generate backoffice module and import it into the root module
```
ng g m backoffice
```

. Generate inventory component
```
ng g c backoffice/inventory
```

. create backoffice routing module with a route to the `InventoryComponent`
```
ng g m backoffice/backoffice-routing -m backoffice
```

. Add a `routerLink` to the navigation bar in `AppComponent`.
     
. Check if it works

### Import library modules

An [example for using the CdkTableModule](https://stackblitz.com/angular/mggnrrbglxr?file=app%2Fcdk-table-basic-example.ts) 
is provided by google. In this assignment you will use the example as a starting point, and tailor it for the 
inventory component.

. import `CdkTableModule` into backoffice module

. copy the [template](https://stackblitz.com/angular/mggnrrbglxr?file=app%2Fcdk-table-basic-example.html) into the inventory template

. copy the [css](https://stackblitz.com/angular/mggnrrbglxr?file=app%2Fcdk-table-basic-example.css) into the inventory template

### Using the library components
check out the component from the [example](https://stackblitz.com/angular/mggnrrbglxr?file=app%2Fcdk-table-basic-example.ts).  
Follow the steps below to rebuild it to work with our book service.

#### Supply template variables.
First we need to provide the variables that are required in the template:
  - displayedColumns
  - datasource
       
##### displayedColumns
create the property `displayedColumns` fill with book properties: id, title, author, price.
in the template, update the value of `cdkColumnDef` for each column to match the `displayedColumns`.
    
##### datasource
the datasource is a layer between the table and the data provider, which is the bookservice in our case.

. create a new file called `books.datasource.ts` in the `backoffice`-folder.
  export a new class, and have it extend `DataSource` from `'@angular/cdk/collections'`.
  
. implement the constructor with a call to super(), and the methods connect/disconnect.
  connects returns an `Observable<Book[]>`
  
. add a parameter of type `BookService` to the constructor.
    return `getBooks()` in the `connect()` method.
    
  > **Why not provide the Datasource as a service?**
   >
   > the datasource is not a service, since we might want multiple instances of it and it helps with testability of the class.
   > However, this means we do not have injection available and have to provide any constructor parameters by hand.
    
. Add the property `datasource` to `InventoryComponent`.

. inject the bookService in the constructor of `InventoryComponent`

. in ngOnInit, create a new BooksDatasource instance and assign it to the dataSource property.
            
### Styling
The CDK table has no styling by default, and what we have in the css is what gives it the current look.
Angular Material provides a [table](https://material.angular.io/components/table/overview) with more styling and features, but it's built upon the CDK table.

. change the cdk table to the material table.
1. import `BrowserAnimationsModule` into the `app.module`. This is required for the animations to work.
2. import `MatTableModule` from `@angular/material` into the feature module.
3. change all `cdk` in the inventory template to `mat`, according to [documentation](https://material.angular.io/components/table/overview)
4. you can now remove most of the CSS in inventory.component.css and the specific CSS classes in your html, since the material table automatically uses material design CSS.
