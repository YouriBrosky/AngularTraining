
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Optional Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../3.dependency-injection/" />
    
    
    <link rel="prev" href="2.presentation-component-book.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Start
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../optional.html">
            
                <a href="../optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../1.modules-and-components/">
            
                <a href="../1.modules-and-components/">
            
                    
                    Modules & Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../1.modules-and-components/1.root-module.html">
            
                <a href="../1.modules-and-components/1.root-module.html">
            
                    
                    1. RootModule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../1.modules-and-components/2.business-component-books.html">
            
                <a href="../1.modules-and-components/2.business-component-books.html">
            
                    
                    2. Business Component
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../1.modules-and-components/3.feature-module.html">
            
                <a href="../1.modules-and-components/3.feature-module.html">
            
                    
                    3. FeatureModule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../1.modules-and-components/optional.html">
            
                <a href="../1.modules-and-components/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Template Syntax
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="1.presentation-component-shelve.html">
            
                <a href="1.presentation-component-shelve.html">
            
                    
                    1. ShelveComponent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="2.presentation-component-book.html">
            
                <a href="2.presentation-component-book.html">
            
                    
                    2. BookComponent
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.3" data-path="optional.html">
            
                <a href="optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../3.dependency-injection/">
            
                <a href="../3.dependency-injection/">
            
                    
                    Dependency Injection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../3.dependency-injection/1.service.html">
            
                <a href="../3.dependency-injection/1.service.html">
            
                    
                    1. Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../3.dependency-injection/2.http.html">
            
                <a href="../3.dependency-injection/2.http.html">
            
                    
                    2. Http
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../3.dependency-injection/optional.html">
            
                <a href="../3.dependency-injection/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../4.reactive-forms/">
            
                <a href="../4.reactive-forms/">
            
                    
                    Reactive Forms
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../4.reactive-forms/1.reactive-form-component.html">
            
                <a href="../4.reactive-forms/1.reactive-form-component.html">
            
                    
                    1. Setup modules & components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../4.reactive-forms/2.reactive-form-template.html">
            
                <a href="../4.reactive-forms/2.reactive-form-template.html">
            
                    
                    2. Coupling the template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../4.reactive-forms/3.validations.html">
            
                <a href="../4.reactive-forms/3.validations.html">
            
                    
                    3. Validations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../4.reactive-forms/optional.html">
            
                <a href="../4.reactive-forms/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../5.routing/">
            
                <a href="../5.routing/">
            
                    
                    Routing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../5.routing/1.books-routing-module.html">
            
                <a href="../5.routing/1.books-routing-module.html">
            
                    
                    1. Feature Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../5.routing/2.root-routing-module.html">
            
                <a href="../5.routing/2.root-routing-module.html">
            
                    
                    2. Root Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../5.routing/3.router-link.html">
            
                <a href="../5.routing/3.router-link.html">
            
                    
                    3. Routerlink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../5.routing/optional.html">
            
                <a href="../5.routing/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../6.testing/">
            
                <a href="../6.testing/">
            
                    
                    Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../6.testing/1.service-test.html">
            
                <a href="../6.testing/1.service-test.html">
            
                    
                    1. Service Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../6.testing/2.business-component-test.html">
            
                <a href="../6.testing/2.business-component-test.html">
            
                    
                    2. Business Component Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../6.testing/optional.html">
            
                <a href="../6.testing/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../7.libraries/">
            
                <a href="../7.libraries/">
            
                    
                    Libraries
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../7.libraries/1.cdk-table.html">
            
                <a href="../7.libraries/1.cdk-table.html">
            
                    
                    1. CDK Table
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../7.libraries/2.material-components.html">
            
                <a href="../7.libraries/2.material-components.html">
            
                    
                    2. Material Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../7.libraries/optional.html">
            
                <a href="../7.libraries/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../8.rxjs/">
            
                <a href="../8.rxjs/">
            
                    
                    RxJS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../8.rxjs/1.route-param.html">
            
                <a href="../8.rxjs/1.route-param.html">
            
                    
                    1. Route Params
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../8.rxjs/2.drag-n-drop.html">
            
                <a href="../8.rxjs/2.drag-n-drop.html">
            
                    
                    2. Drag & Drop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../8.rxjs/optional.html">
            
                <a href="../8.rxjs/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../GLOSSARY.html">
            
                <a href="../GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Optional</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="optional">Optional</h2>
<h3 id="ngifelse"><a href="https://medium.com/aviabird/ngif-else-lands-in-angular-2-0-a242940e54ff" target="_blank">ngIf;else</a></h3>
<ol>
<li>Show a message for the user when there is not yet a book selected.</li>
</ol>
<h3 id="deselect">Deselect</h3>
<p>Add the feature to deselect a selected book. Where do you handle the user interaction? Remember the responsibilities of <code>Business Components</code> and <code>Presentation components</code></p>
<p>You can use the following template to show a cross.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right deselect&quot;</span>&gt;</span>X<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<h2 id="directive">@Directive</h2>
<p>When you need to add functionality to a Component or an HTML-element, but do not need to add anything to the DOM, a Directive is what you need.
Directives are TypeScript classes annotated with <code>@Directive</code> instead of <code>@Component</code>, and do not have a template.</p>
<p>In this assignment we are going to make a directive that highlights the button element that has been selected.</p>
<ol>
<li>Create a new file called <code>book-highlight.directive.ts</code> in the <code>books</code> folder.</li>
<li>Export a class called <code>BookHighlightDirective</code> and decorate it with the <code>@Directive</code> annotation.</li>
<li>The <code>@Directive</code> decorator requires the property <code>selector</code>, which is how we reference it in the template. Give it a value that complies with the <a href="https://angular.io/guide/styleguide" target="_blank">StyleGuide</a></li>
<li>Declare the directive with the <code>BooksModule</code> so we can use the directive in the template.</li>
</ol>
<p>The <code>BookHighlightDirective</code> needs an input to know what book is selected, and based on that input it should change the class <code>bg--carrot</code> to <code>bg--cyan</code>.
For this we need a property decorated with <code>@Input</code>, and the <code>ngOnChanges</code> lifecycle hook so we can react to any changes to the input.</p>
<ol>
<li>add a property called <code>selected</code> and decorate it with the <code>@Input()</code> decorator.</li>
<li>Implement the <code>OnChanges</code> lifecycle hook, and add the required method.</li>
<li><code>ngOnChanges</code> gets a parameter of the type <code>SimpleChanges</code>. We need to get the <code>currentValue</code> from this parameter. Check the <a href="https://angular.io/guide/lifecycle-hooks#onchanges" target="_blank">docs</a> to see how to do this.</li>
<li>create a method that will set the classes, called <code>toggleSelectedClass</code>, and give it the currentValue of selected.
Always try and keep the lifecycle methods clean from any logic.</li>
<li>Use the <code>[]</code>-syntax to set the selected property from the template of <code>ShelveComponent</code>. How do you determine the value of the property?</li>
</ol>
<p>To interact with the DOM from a Directive, we need a reference to the HTML-element to toggle the class. 
Angular provides the <code>template reference variable</code> mechanism for this, that you use by adding <code>#variableName</code> in the template to the element.
This variable we can pass into our directive using another <code>@Input</code> decorated property.</p>
<ol>
<li>Add a new <code>@Input</code> decorated property to <code>BookHighlighterDirective</code> that will hold the HTML element.</li>
<li>In the template of <code>ShelveComponent</code>, add a <code>template reference variable</code> to the <code>button</code>-element.</li>
<li>Pass the <code>template reference variable</code> into <code>BookHighlighterDirective</code> using the <code>[]</code>-syntax.</li>
</ol>
<p>To finish this task, we need to actually toggle the class to change tha background color. We need to remove the class &apos;bg--carrot&apos; if the book <em>is not</em> selected,
 and add the class <code>bg--cyan</code> if the book <em>is</em> selected.
 The standard HTML-element provided by the browser has a property called <code>classlist</code>, that has a method called <code>toggleClass</code>. This fits our needs exactly.
 <em>NOTE</em> classlist is not implemented in older browsers. Make sure the polyfill is uncommented in the file <code>polyfills.ts</code> and the classlist npm package is installed.</p>
<ol>
<li><p>Toggle the classes using <code>toggleClass</code> on the property <code>classlist</code> from <code>bookElement</code>.</p>
<p><em>NOTE</em>
This is not the Best Practice. Angular provides a <a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a> that you need to use when interacting with DOM Elements. 
This requires injecting a <a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a> and an element into the class, which we are going to talk about in the section <code>Dependency Injection</code>.
There is an optional assignment in that section where you will rewrite this directive to be compliant with the Style Guide.</p>
</li>
</ol>
<h3 id="viewchildviewchildren">@ViewChild/@ViewChildren</h3>
<p>Sometimes you want to get notified when HTML elements or child components become present in the DOM, and perform some action.
Since actions are defined in the TypeScript class, we need to get a reference from the template into the component class.
Angular provides the decorators @ViewChild()  / @ViewChildren() to do this.</p>
<p>We are going to make a counter in the <code>shelve</code> component of how many books there are by counting the buttons in the template.</p>
<ol>
<li><p>Create a <a href="../GLOSSARY.html#template-reference-variable" class="glossary-term" title="A reference to an element in the template. Can be given to the component.">template reference variable</a> on the <code>&lt;button&gt;</code> element in the template of <code>ShelveComponent</code>.</p>
</li>
<li><p>Add a property to <code>shelve.component</code> to hold the button elements, and decorate it with <code>@ViewChildren()</code></p>
<pre><code class="lang-javascript">@ViewChildren(<span class="hljs-string">&apos;templateReferenceVariable&apos;</span>)
elementQueryList: QueryList&lt;ElementRef&gt;
</code></pre>
</li>
</ol>
<p>The properties decorated by <code>ViewChild()</code>/<code>@ViewChildren()</code> are filled by Angular in the <code>viewInit</code> lifecycle phase.
When this phase has completed and the properties are filled with a reference, Angular calls the lifecycle hook <code>ngAfterViewInit</code> on the component.</p>
<ol>
<li>Implement the interface <code>AfterViewInit</code> and add the required method.</li>
</ol>
<p>In this method you can safely call properties decorated with <code>ViewChild()</code>/<code>@ViewChildren()</code> and be assured they are not undefined.</p>
<ol>
<li>In this method, call <code>forEach()</code> on the property, which requires an arrow function as a parameter.<pre><code class="lang-javascript"> .forEach((element) =&gt; {
 });
</code></pre>
</li>
<li>print the property <code>nativeElement</code> to the console. What else could you do with this property?</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="2.presentation-component-book.html" class="navigation navigation-prev " aria-label="Previous page: 2. BookComponent">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../3.dependency-injection/" class="navigation navigation-next " aria-label="Next page: Dependency Injection">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Optional","level":"1.3.3","depth":2,"next":{"title":"Dependency Injection","level":"1.4","depth":1,"path":"3.dependency-injection/README.md","ref":"3.dependency-injection/README.md","articles":[{"title":"1. Services","level":"1.4.1","depth":2,"path":"3.dependency-injection/1.service.md","ref":"3.dependency-injection/1.service.md","articles":[]},{"title":"2. Http","level":"1.4.2","depth":2,"path":"3.dependency-injection/2.http.md","ref":"3.dependency-injection/2.http.md","articles":[]},{"title":"Optional","level":"1.4.3","depth":2,"path":"3.dependency-injection/optional.md","ref":"3.dependency-injection/optional.md","articles":[]}]},"previous":{"title":"2. BookComponent","level":"1.3.2","depth":2,"path":"2.template-syntax/2.presentation-component-book.md","ref":"2.template-syntax/2.presentation-component-book.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"_assignments/markdown","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"2.template-syntax/optional.md","mtime":"2018-02-20T08:19:02.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-02-20T10:02:28.080Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

