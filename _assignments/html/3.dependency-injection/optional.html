
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Optional Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../4.testing/" />
    
    
    <link rel="prev" href="2.http.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Start
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../optional.html">
            
                <a href="../optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../0.intro/">
            
                <a href="../0.intro/">
            
                    
                    Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../1.modules-and-components/">
            
                <a href="../1.modules-and-components/">
            
                    
                    Modules & Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../1.modules-and-components/1.root-module.html">
            
                <a href="../1.modules-and-components/1.root-module.html">
            
                    
                    1. RootModule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../1.modules-and-components/2.business-component-books.html">
            
                <a href="../1.modules-and-components/2.business-component-books.html">
            
                    
                    2. Business Component
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../1.modules-and-components/3.feature-module.html">
            
                <a href="../1.modules-and-components/3.feature-module.html">
            
                    
                    3. FeatureModule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../1.modules-and-components/optional.html">
            
                <a href="../1.modules-and-components/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../2.template-syntax/">
            
                <a href="../2.template-syntax/">
            
                    
                    Template Syntax
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../2.template-syntax/1.presentation-component-shelve.html">
            
                <a href="../2.template-syntax/1.presentation-component-shelve.html">
            
                    
                    1. ShelveComponent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../2.template-syntax/2.presentation-component-book.html">
            
                <a href="../2.template-syntax/2.presentation-component-book.html">
            
                    
                    2. BookComponent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../2.template-syntax/optional.html">
            
                <a href="../2.template-syntax/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Dependency Injection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="1.service.html">
            
                <a href="1.service.html">
            
                    
                    1. Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="2.http.html">
            
                <a href="2.http.html">
            
                    
                    2. Http
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="optional.html">
            
                <a href="optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../4.testing/">
            
                <a href="../4.testing/">
            
                    
                    Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../4.testing/1.service-test.html">
            
                <a href="../4.testing/1.service-test.html">
            
                    
                    1. Service Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../4.testing/2.component-test.html">
            
                <a href="../4.testing/2.component-test.html">
            
                    
                    2. Business Component Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../4.testing/optional.html">
            
                <a href="../4.testing/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../5.reactive-forms/">
            
                <a href="../5.reactive-forms/">
            
                    
                    Reactive Forms
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../5.reactive-forms/1.reactive-form-component.html">
            
                <a href="../5.reactive-forms/1.reactive-form-component.html">
            
                    
                    1. Setup modules & components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../5.reactive-forms/2.reactive-form-template.html">
            
                <a href="../5.reactive-forms/2.reactive-form-template.html">
            
                    
                    2. Coupling the template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../5.reactive-forms/3.validations.html">
            
                <a href="../5.reactive-forms/3.validations.html">
            
                    
                    3. Validations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../5.reactive-forms/optional.html">
            
                <a href="../5.reactive-forms/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../6.routing/">
            
                <a href="../6.routing/">
            
                    
                    Routing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../6.routing/1.books-routing-module.html">
            
                <a href="../6.routing/1.books-routing-module.html">
            
                    
                    1. Feature Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../6.routing/2.root-routing-module.html">
            
                <a href="../6.routing/2.root-routing-module.html">
            
                    
                    2. Root Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../6.routing/3.router-link.html">
            
                <a href="../6.routing/3.router-link.html">
            
                    
                    3. Routerlink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../6.routing/4.404.html">
            
                <a href="../6.routing/4.404.html">
            
                    
                    4. 404
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../6.routing/optional.html">
            
                <a href="../6.routing/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../7.libraries/">
            
                <a href="../7.libraries/">
            
                    
                    Libraries
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../7.libraries/1.cdk-table.html">
            
                <a href="../7.libraries/1.cdk-table.html">
            
                    
                    1. CDK Table
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../7.libraries/2.material-components.html">
            
                <a href="../7.libraries/2.material-components.html">
            
                    
                    2. Material Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../7.libraries/optional.html">
            
                <a href="../7.libraries/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../8.rxjs/">
            
                <a href="../8.rxjs/">
            
                    
                    RxJS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../8.rxjs/1.route-param.html">
            
                <a href="../8.rxjs/1.route-param.html">
            
                    
                    1. Route Params
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../8.rxjs/2.drag-n-drop.html">
            
                <a href="../8.rxjs/2.drag-n-drop.html">
            
                    
                    2. Drag & Drop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../8.rxjs/optional.html">
            
                <a href="../8.rxjs/optional.html">
            
                    
                    Optional
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../GLOSSARY.html">
            
                <a href="../GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Optional</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="optional">Optional</h2>
<h3 id="dependency-injection">Dependency Injection</h3>
<p>It&apos;s possible to set the title of the window in the browser from an Angular application with the <a href="https://angular.io/guide/set-document-title" target="_blank">Title</a>-<a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a>.</p>
<ol>
<li>Change the title of the window to the selected book. Which component should be responsible for this?</li>
</ol>
<h3 id="bookreserveddirective-20">BookReservedDirective 2.0</h3>
<p>If you have not yet finished the assignment <a href="../2.template-syntax/optional.html#@Directive">@Directive</a>, do that first. It is the basis for this assignment.
This directive is not according to the StyleGuide, because it interacts with a DOM element directly. 
Angular provides a <a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a> that adds the possibility to interact with DOM elements, even when you are not in the browser. 
Angular made it a <em>Best Practice</em> to always use this <a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a>, so advanced features like migrating to server side rendering can be done without issues.</p>
<ol>
<li>Inject the <a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a> <code>Renderer2</code> into the <code>BookReservedDirective</code>.</li>
<li>The <code>renderer</code> <a href="../GLOSSARY.html#service" class="glossary-term" title="A service in the Angular context is an injectable class which is responsible for doing the work. It has no UserInterface dependencies.">service</a> has a method to set the style, called <a href="https://angular.io/api/core/Renderer2#setStyle" target="_blank">setStyle()</a>.
Refactor the code using this method.</li>
</ol>
<p>Now that we know how to use injection, we don&apos;t need the separate <code>@Input</code> to get a reference to the element the directive is on. Angular can inject this element for us.</p>
<ol>
<li>Inject the element of type <code>ElementRef</code> into the <code>BookReservedDirective</code>.</li>
<li>The <code>ElementRef</code> has a property <code>nativeElement</code>, which is the same HTML Element as we got from the template. The <code>nativeElement</code> is what the <code>renderer</code> needs to set the style.</li>
<li>Remove the <code>template reference variable</code> and the <code>[]</code>-syntax from the places where <code>BookReservedDirective</code> is used.
This makes the <code>BookReservedDirective</code> easier to use, because the API surface has become smaller.</li>
</ol>
<h3 id="observables">Observables</h3>
<h4 id="error-handling">Error handling</h4>
<p>You should always handle errors when working with Observable or Promises, at least with a message to the user to inform them what went wrong.
Fot http calls, this is even more important, because the user does not see any errors if they are not handled.</p>
<ol>
<li>Show an error message to the user when a http call fails. You can simulate this, by changing the URL in the <code>books.service</code>.</li>
</ol>
<h4 id="multiple-subscribes">multiple <code>subscribe</code>s</h4>
<p>It can happen that there are multiple components listening for the same http-call, or that a new component is rendered in the DOM which makes the entire Observable run again.
We&apos;ll have a look at how this is done.</p>
<ol>
<li><p>Copy the <code>ibs-shelve</code> tag in the template of <code>BooksComponent</code>, so that there are 2 instances listening for events from 1 Observable.
 If it doesn&apos;t work, make sure the <code>async</code>-<a href="../GLOSSARY.html#pipe" class="glossary-term" title="Change how the interpolated property is outputted in the template.">pipe</a> appears twice in the template.</p>
</li>
<li><p>In the Developer tools in the browser, open the tab <code>Network</code> and filter on <code>XHR</code> to only see AJAX calls. When you refresh, how many calls are made to the backend for the exact same data?</p>
</li>
<li><p>Try to get only 1 http call performed, when there are more components listening. Have a look at the <a href="http://blog.novanet.no/angular-pitfall-multiple-http-requests-with-rxjs-and-observable-async/" target="_blank">share()</a>-operator.</p>
</li>
</ol>
<h4 id="transforming-observables">Transforming Observables.</h4>
<p>In the multiple <code>subscribes</code>s assignment we&apos;ve made 2 components that show the exact same data.
Make one of the components only show the  <strong>reserved</strong> books. Do you make a custom component that filters the data itself, or do you let <code>BooksComponent</code> handle it?</p>
<p>You can make use of the <code>map()</code>-operator to transform the content of the data that goes trough the sequence, in this case <code>Book[]</code>.
The <code>filter()</code> function on Array can be used to only get the books we want.</p>
<pre><code>&gt; ** Best practice: Why not filter()? **
&gt; 
&gt; with filter() you can exclude certain events in the sequence from propagating. Since our even is the `Book[]`, and we always want this value for the sequence.
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="2.http.html" class="navigation navigation-prev " aria-label="Previous page: 2. Http">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../4.testing/" class="navigation navigation-next " aria-label="Next page: Testing">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Optional","level":"1.5.3","depth":2,"next":{"title":"Testing","level":"1.6","depth":1,"path":"4.testing/README.md","ref":"4.testing/README.md","articles":[{"title":"1. Service Test","level":"1.6.1","depth":2,"path":"4.testing/1.service-test.md","ref":"4.testing/1.service-test.md","articles":[]},{"title":"2. Business Component Test","level":"1.6.2","depth":2,"path":"4.testing/2.component-test.md","ref":"4.testing/2.component-test.md","articles":[]},{"title":"Optional","level":"1.6.3","depth":2,"path":"4.testing/optional.md","ref":"4.testing/optional.md","articles":[]}]},"previous":{"title":"2. Http","level":"1.5.2","depth":2,"path":"3.dependency-injection/2.http.md","ref":"3.dependency-injection/2.http.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"_assignments/markdown","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"3.dependency-injection/optional.md","mtime":"2018-09-12T15:50:35.313Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-14T14:25:31.560Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

